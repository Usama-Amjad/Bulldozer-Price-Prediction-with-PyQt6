import pickle
import random
import numpy as np
from datetime import date ,datetime

def get_prediction(
    modelid:int,
    YearMade:int,
    meterReading:int,
    saleID=random.randint(1227800,1937999),
    machineId=random.randint(1000000,2000000),
    saleYear=date.today().year,
    saleMonth=date.today().month,
    saleDay=date.today().day,
    saleDayofWeek=datetime.now().weekday(),
    saleDayofYear=datetime.now().timetuple().tm_yday,
    usageBand=random.randint(0,3),
    fiModelDesc=random.randint(500,1700),
    fiBaseModel=random.randint(50,200),
    fiSecondaryDesc=random.randint(1,25),
    fiModelSeries=0,
    fiModelDescriptor=0,
    ProductSize=random.randint(1,6),
    fiProductClassDesc=random.randint(2,50),
    state=random.randint(6,55),
    ProductGroup=random.randint(1,6),
    ProductGroupDesc=random.randint(1,6),
    Drive_System=0,
    Enclosure=random.randint(1,3),
    Forks=0,
    Pad_Type=2,
    Ride_Control=random.randint(1,2),
    Stick=random.randint(1,2),
    Transmission=0,
    Turbocharged=1,
    Blade_Extension=0,
    Blade_Width=0,
    Enclosure_Type=0,
    Engine_Horsepower=0,
    Hydraulics=11,
    Pushblock=0,
    Ripper=0,
    Scarifier=0,
    Tip_Control=0,
    Tire_Size=0,
    Coupler=random.randint(1,3),
    Coupler_System=0,
    Grouser_Tracks=0,
    Track_Type=0,
    Undercarriage_Pad_Width=17,
    Stick_Length=0,
    Thumb=random.randint(2,3),
    Pattern_Changer=0,
    Grouser_Type=0,
    Backhoe_Mounting=0,
    Blade_Type=0,
    Travel_Controls=0,
    Differential_Type=0,
    Steering_Controls=0,
    Hydraulics_Flow=0,
    MachineHoursCurrentMeter_is_missing=False,
    UsageBand_is_missing=False,
    fiModelDesc_is_missing=False,
    fiBaseModel_is_missing=False,
    fiSecondaryDesc_is_missing=False,
    fiModelSeries_is_missing=True,
    fiModelDescriptor_is_missing=True,
    ProductSize_is_missing=False,
    fiProductClassDesc_is_missing=False,
    state_is_missing=False,
    ProductGroup_is_missing=False,
    ProductGroupDesc_is_missing=False,
    Drive_System_is_missing=True,
    Enclosure_is_missing=False,
    Forks_is_missing=True,
    Pad_Type_is_missing=False,
    Ride_Control_is_missing=False,    
    Stick_is_missing=False,
    Transmission_is_missing=True,
    Turbocharged_is_missing=False,
    Blade_Extension_is_missing=True,
    Blade_Width_is_missing=True,
    Enclosure_Type_is_missing=True,
    Engine_Horsepower_is_missing=True,
    Hydraulics_is_missing=False,
    Pushblock_is_missing=True,
    Ripper_is_missing=True,
    Scarifier_is_missing=True,
    Tip_Control_is_missing=True,
    Tire_Size_is_missing=True,
    Coupler_is_missing=False,
    Coupler_System_is_missing=True,
    Grouser_Tracks_is_missing=True,
    Hydraulics_Flow_is_missing=True,
    Track_Type_is_missing=True,
    Undercarriage_Pad_Width_is_missing=False,
    Stick_Length_is_missing=True,
    Thumb_is_missing=False,
    Pattern_Changer_is_missing=True,
    Grouser_Type_is_missing=True,
    Backhoe_Mounting_is_missing=True,
    Blade_Type_is_missing=True,
    Travel_Controls_is_missing=True,
    Differential_Type_is_missing=True,
    Steering_Controls_is_missing=True,
    auctioneerID_is_missing=False,
    datasorce=121,
    actioneerId=3,
):


    array=( saleID,
            machineId,
            modelid,
            datasorce,
            actioneerId,
            YearMade,
            meterReading,
            usageBand,
            fiModelDesc,
            fiBaseModel,
            fiSecondaryDesc,
            fiModelSeries,
            fiModelDescriptor,
            ProductSize,
            fiProductClassDesc,
            state,
            ProductGroup,
            ProductGroupDesc,
            Drive_System,
            Enclosure,
            Forks,
            Pad_Type,
            Ride_Control,
            Stick,
            Transmission,
            Turbocharged,
            Blade_Extension,
            Blade_Width,
            Enclosure_Type,
            Engine_Horsepower,
            Hydraulics,
            Pushblock,
            Ripper,
            Scarifier,
            Tip_Control,
            Tire_Size,
            Coupler,
            Coupler_System,
            Grouser_Tracks,
            Hydraulics_Flow,
            Track_Type,
            Undercarriage_Pad_Width,
            Stick_Length,Thumb,
            Pattern_Changer,
            Grouser_Type,
            Backhoe_Mounting,
            Blade_Type,
            Travel_Controls,
            Differential_Type,
            Steering_Controls,
            saleYear,
            saleMonth,
            saleDay,
            saleDayofWeek,
            saleDayofYear,
            MachineHoursCurrentMeter_is_missing,
            UsageBand_is_missing,
            fiModelDesc_is_missing,
            fiBaseModel_is_missing,
            fiSecondaryDesc_is_missing,
            fiModelSeries_is_missing,
            fiModelDescriptor_is_missing,
            ProductSize_is_missing,
            fiProductClassDesc_is_missing,
            state_is_missing,
            ProductGroup_is_missing,
            ProductGroupDesc_is_missing,
            Drive_System_is_missing	,
            Enclosure_is_missing,
            Forks_is_missing,
            Pad_Type_is_missing,
            Ride_Control_is_missing,
            Stick_is_missing,	
            Transmission_is_missing,
            Turbocharged_is_missing	,
            Blade_Extension_is_missing,
            Blade_Width_is_missing	,
            Enclosure_Type_is_missing,
            Engine_Horsepower_is_missing,
            Hydraulics_is_missing,
            Pushblock_is_missing,	
            Ripper_is_missing,
            Scarifier_is_missing,
            Tip_Control_is_missing,
            Tire_Size_is_missing,
            Coupler_is_missing,	
            Coupler_System_is_missing,
            Grouser_Tracks_is_missing,
            Hydraulics_Flow_is_missing,
            Track_Type_is_missing,	
            Undercarriage_Pad_Width_is_missing,
            Stick_Length_is_missing,
            Thumb_is_missing,
            Pattern_Changer_is_missing,	
            Grouser_Type_is_missing,
            Backhoe_Mounting_is_missing	,
            Blade_Type_is_missing,	
            Travel_Controls_is_missing,
            Differential_Type_is_missing,
            Steering_Controls_is_missing,
            auctioneerID_is_missing
    )

    
    array = np.asarray(array)
    
    array=array.reshape(1,-1)
    
    
    with open("model_file.bin", "rb") as file:
        model = pickle.load(file)
    
    prediction=model.predict(array)
    
    return round(prediction[0])
    